<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Login â€¢ AiaxStock</title>
  <link rel="preconnect" href="https://esm.sh">
  <style>
    :root{ --pink1:#FFE5EC; --pink2:#FFB3C6; --pink3:#FF8FAB; --shadow:0 10px 28px rgba(255,143,171,.35); }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,Segoe UI,Inter,Arial;background:linear-gradient(#ffe9f1,#ffdbe6,#ffe9f1);}
    .wrap{max-width:720px;margin:56px auto;padding:24px}
    h1{margin:0 0 10px;font-size:48px}
    p{font-size:18px;color:#222;margin:0 0 20px}
    .tiles{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .tile{background:#fff;border-radius:18px;box-shadow:var(--shadow);padding:18px}
    .btn{width:100%;padding:18px 20px;font-weight:800;font-size:20px;border-radius:14px;
         background:linear-gradient(180deg,var(--pink2),var(--pink3)); color:#fff;border:none;cursor:pointer}
    .btn:active{transform:translateY(1px)}
    .form{margin-top:14px;padding:14px;border:1px solid #ffd1df;border-radius:12px;background:#fff;display:none}
    label{font-weight:700;font-size:14px}
    input{width:100%;padding:12px;border:1px solid #e8d3db;border-radius:10px;margin-top:6px}
    .row{display:flex;gap:10px;margin-top:12px}
    .ghost{padding:12px 14px;border-radius:10px;background:#fff;border:1px solid #ffd1df;font-weight:700;cursor:pointer}
    @media (max-width:720px){ .tiles{grid-template-columns:1fr} h1{font-size:40px} }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Login</h1>
    <p>Choose a role then type the <strong>UUID</strong> to continue (no magic link).</p>

    <div class="tiles">
      <!-- OWNER -->
      <div class="tile">
        <button class="btn" id="btnOwner" type="button">Login as Owner</button>
        <form class="form" id="formOwner" novalidate>
          <label for="ownerUUID">Owner UUID</label>
          <input id="ownerUUID" placeholder="Type Owner UUID" autocomplete="off" />
          <div class="row">
            <button class="btn" id="ownerGo" type="submit" style="flex:1">Continue</button>
          </div>
        </form>
      </div>

      <!-- ADMIN -->
      <div class="tile">
        <button class="btn" id="btnAdmin" type="button">Login as Admin</button>
        <form class="form" id="formAdmin" novalidate>
          <label for="adminUUID">Admin UUID</label>
          <input id="adminUUID" placeholder="Type Admin UUID" autocomplete="off" />
          <div class="row">
            <button class="btn" id="adminGo" type="submit" style="flex:1">Continue</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- config + shared app -->
  <script src="config.js"></script>
  <script type="module" src="app.js"></script>

  <script>
    // helpers
    const $ = s => document.querySelector(s);
    const UUID_RE = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;

    // show/hide forms
    $('#btnOwner').onclick = () => {
      $('#formOwner').style.display='block';
      $('#formAdmin').style.display='none';
      $('#ownerUUID').focus();
    };
    $('#btnAdmin').onclick = () => {
      $('#formAdmin').style.display='block';
      $('#formOwner').style.display='none';
      $('#adminUUID').focus();
    };

    // submit handlers (no defaults shown, no admin1/2)
    $('#formOwner').addEventListener('submit', (e)=>{
      e.preventDefault();
      const uid = $('#ownerUUID').value.trim();
      if(!UUID_RE.test(uid)) return alert('Invalid Owner UUID');
      if(!window.__APP__?.loginWithUid){ alert('App not loaded'); return; }
      window.__APP__.loginWithUid('owner', uid);
    });

    $('#formAdmin').addEventListener('submit', (e)=>{
      e.preventDefault();
      const uid = $('#adminUUID').value.trim();
      if(!UUID_RE.test(uid)) return alert('Invalid Admin UUID');
      if(!window.__APP__?.loginWithUid){ alert('App not loaded'); return; }
      window.__APP__.loginWithUid('admin', uid);
    });
  </script>
</body>
</html>