<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AiaxStock Management</title>
  <link rel="stylesheet" href="style.css?v=7">
<script defer src="config.js?v=7"></script>
<script defer src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script defer src="app.js?v=7"></script></head>
<body>

  <!-- Toast / Loading (never blocks taps) -->
  <div id="toast" class="toast hidden">Loading…</div>
  <div id="overlay" class="loading-overlay hidden"></div>

  <!-- ===== Login ===== -->
  <main id="screen-login" class="container">
    <h1>Login</h1>
    <p>Choose a role then <b>type the UUID</b> to continue (no magic link).</p>

    <button id="btn-owner" class="btn btn-primary">Login as Owner</button>

    <div id="owner-box" class="login-card hidden">
      <label for="owner-uuid">Owner UUID</label>
      <input id="owner-uuid" type="text" inputmode="text" autocomplete="off" placeholder="paste owner UUID" />
      <button id="owner-continue" class="btn btn-primary">Continue</button>
    </div>

    <button id="btn-admin" class="btn btn-primary">Login as Admin</button>

    <div id="admin-box" class="login-card hidden">
      <label for="admin-uuid">Admin UUID</label>
      <input id="admin-uuid" type="text" inputmode="text" autocomplete="off" placeholder="paste admin UUID" />
      <button id="admin-continue" class="btn btn-primary">Continue</button>
    </div>

    <p class="palette">Palette • Lavender Blush • Pastel Pink • Light Pink • Pink Champagne</p>
  </main>

  <!-- ===== Owner Panel ===== -->
  <main id="screen-owner" class="container hidden">
    <header class="topbar">
      <h1>AiaxStock Management — <span class="role">Owner</span></h1>
      <div class="toolbar">
        <a id="link-admin" class="btn btn-ghost">Go to Admin</a>
        <button id="btn-logout-o" class="btn btn-secondary">Logout</button>
      </div>
    </header>

    <nav class="tabs">
      <button class="tab active" data-tab="owner-add">Add stock</button>
      <button class="tab" data-tab="owner-stocks">Stocks</button>
      <button class="tab" data-tab="owner-records">Records</button>
    </nav>

    <!-- Add Stock -->
    <section id="owner-add" class="card">
      <div class="grid-2">
        <div>
          <label>Product</label>
          <select id="o-product"></select>
        </div>
        <div>
          <label>Account type</label>
          <select id="o-type"></select>
        </div>
        <div>
          <label>Duration</label>
          <select id="o-duration"></select>
        </div>
        <div>
          <label>Quantity</label>
          <input id="o-qty" type="number" min="1" value="1" />
        </div>
        <div>
          <label>Email (optional)</label>
          <input id="o-email" type="text" placeholder="login email" />
        </div>
        <div>
          <label>Password (optional)</label>
          <input id="o-pass" type="text" placeholder="login password" />
        </div>
        <div>
          <label>Profile (optional)</label>
          <input id="o-profile" type="text" placeholder="profile name" />
        </div>
        <div>
          <label>PIN (optional)</label>
          <input id="o-pin" type="text" placeholder="profile pin" />
        </div>
        <div class="full">
          <label>Notes</label>
          <input id="o-notes" type="text" placeholder="any notes" />
        </div>
      </div>
      <div class="actions">
        <button id="o-add-stock" class="btn btn-primary">Add stock</button>
      </div>
    </section>

    <!-- Stocks -->
    <section id="owner-stocks" class="card hidden">
      <div class="table-wrap">
        <table class="table" id="o-stocks-table">
          <thead>
            <tr>
              <th>Product</th><th>Type</th><th>Duration</th><th>Qty</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="actions">
        <button id="o-refresh" class="btn btn-secondary">Refresh</button>
      </div>
    </section>

    <!-- Records (placeholder; CRUD batch comes next) -->
    <section id="owner-records" class="card hidden">
      <div class="table-wrap">
        <table class="table" id="o-records-table">
          <thead>
            <tr>
              <th>ID</th><th>Product</th><th>Type</th><th>Created</th><th>Expires</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- ===== Admin Panel ===== -->
  <main id="screen-admin" class="container hidden">
    <header class="topbar">
      <h1>AiaxStock Management — <span class="role">Admin</span></h1>
      <div class="toolbar">
        <a id="link-owner" class="btn btn-ghost">Go to Owner</a>
        <button id="btn-logout-a" class="btn btn-secondary">Logout</button>
      </div>
    </header>

    <section class="card">
      <h2>Available Stocks</h2>
      <div class="table-wrap">
        <table class="table" id="a-stocks">
          <thead><tr><th>Product</th><th>Type</th><th>Duration</th><th>Qty</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="actions">
        <button id="a-refresh" class="btn btn-secondary">Refresh</button>
      </div>
    </section>

    <section class="card">
      <h2>Get Account</h2>
      <div class="grid-3">
        <div>
          <label>Product</label>
          <select id="a-product"></select>
        </div>
        <div>
          <label>Account type</label>
          <select id="a-type"></select>
        </div>
        <div>
          <label>Duration</label>
          <select id="a-duration"></select>
        </div>
      </div>
      <div class="actions">
        <button id="a-get" class="btn btn-primary">Get Account</button>
      </div>
      <div id="a-details" class="account-details hidden"></div>
    </section>

    <section class="card">
      <h2>My Buyers Record</h2>
      <div class="table-wrap">
        <table class="table" id="a-records">
          <thead><tr><th>ID</th><th>Product</th><th>Type</th><th>Created</th><th>Expires</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>
</body>
</html>